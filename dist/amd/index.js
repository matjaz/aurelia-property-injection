var __extends=this&&this.__extends||function(t,e){function n(){this.constructor=t}for(var a in e)e.hasOwnProperty(a)&&(t[a]=e[a]);n.prototype=e.prototype,t.prototype=new n};define(["require","exports","aurelia-metadata","aurelia-dependency-injection"],function(t,e,n,a){function r(t,e){if(!e)return function(e,n){i(e,n,t)};var a=n.Metadata.getOwn("design:type",t,e);i(t,e,a)}function i(t,a,r){if(r){var i=t.constructor,o=n.Metadata.getOwn(e.MetadataKey,i);if(!o){var s=n.Metadata.getOwn(n.Metadata.instanceActivator,i);if(s){if(!(s instanceof c))throw new Error("Instance activator already set. Can not use property injection.")}else n.Metadata.define(n.Metadata.instanceActivator,c.instance,i);o={},n.Metadata.define(e.MetadataKey,o,i)}o[a]=r}}e.MetadataKey="di:propInjectables";var o,c=function(t){function r(e){void 0===e&&(e=a.Container.instance),t.call(this),this.container=e}return __extends(r,t),Object.defineProperty(r,"instance",{get:function(){return o||(o=new r)},enumerable:!0,configurable:!0}),r.prototype.invoke=function(t,e){var n=Object.create(t.prototype||Object.prototype);this.injectProperties(n,t);var a=Function.apply.call(t,n,e);return a&&"object"==typeof a&&(n=a,this.injectProperties(n,t)),n},r.prototype.injectProperties=function(t,a){var r=n.Metadata.getOwn(e.MetadataKey,a||t.constructor);if(r)for(var i in r)this.injectProperty(t,i,r[i])},r.prototype.injectProperty=function(t,e,n){Object.defineProperty(t,e,{value:this.container.get(n)})},r}(a.ClassActivator);e.PropertyClassActivator=c,e.inject=r});