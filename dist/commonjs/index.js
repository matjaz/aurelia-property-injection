function inject(t,e){if(!e)return function(e,a){injectType(e,a,t)};var a=aurelia_metadata_1.Metadata.getOwn("design:type",t,e);injectType(t,e,a)}function injectType(t,e,a){if(a){var n=t.constructor,r=aurelia_metadata_1.Metadata.getOwn(exports.MetadataKey,n);if(!r){var i=aurelia_metadata_1.Metadata.getOwn(aurelia_metadata_1.Metadata.instanceActivator,n);if(i){if(!(i instanceof PropertyClassActivator))throw new Error("Instance activator already set. Can not use property injection.")}else aurelia_metadata_1.Metadata.define(aurelia_metadata_1.Metadata.instanceActivator,PropertyClassActivator.instance,n);r={},aurelia_metadata_1.Metadata.define(exports.MetadataKey,r,n)}r[e]=a}}var __extends=this&&this.__extends||function(t,e){function a(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);a.prototype=e.prototype,t.prototype=new a},aurelia_metadata_1=require("aurelia-metadata"),aurelia_dependency_injection_1=require("aurelia-dependency-injection");exports.MetadataKey="di:propInjectables";var singleton,PropertyClassActivator=function(t){function e(e){void 0===e&&(e=aurelia_dependency_injection_1.Container.instance),t.call(this),this.container=e}return __extends(e,t),Object.defineProperty(e,"instance",{get:function(){return singleton||(singleton=new e)},enumerable:!0,configurable:!0}),e.prototype.invoke=function(t,e){var a=Object.create(t.prototype||Object.prototype);this.injectProperties(a,t);var n=Function.apply.call(t,a,e);return n&&"object"==typeof n&&(a=n,this.injectProperties(a,t)),a},e.prototype.injectProperties=function(t,e){var a=aurelia_metadata_1.Metadata.getOwn(exports.MetadataKey,e||t.constructor);if(a)for(var n in a)this.injectProperty(t,n,a[n])},e.prototype.injectProperty=function(t,e,a){Object.defineProperty(t,e,{value:this.container.get(a)})},e}(aurelia_dependency_injection_1.ClassActivator);exports.PropertyClassActivator=PropertyClassActivator,exports.inject=inject;